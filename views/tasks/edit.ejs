<%- include ("../partials/header"); %>

<div class="container">

    <!-- page title-->
    <h1 style="text-align: center">Edit Task of <%= list.name %> List </h1>

    <!-- form: update task -->
    <div class="row row-cols-2" id="update-task-form">

        <form action="/lists/<%= list._id %>/tasks/<%= task._id %>?_method=PUT" method="POST">

            <!-- task[title] field -->
            <div class="form-group row">
                <label for="task-title" class="col-sm-3 col-form-label">Title</label>
                <div class="col-sm-9">
                    <input type="text" class="form-control" id="task-title" name="task[title]"
                        value="<%= task.title %>">
                </div>
            </div>

            <!-- task[status] field -->
            <% var statusOptions = [ { id: "next-up",     name: "Next Up" }, 
                       { id: "in-progress", name: "In Progress" },               
                       { id: "complete",    name: "Complete" } ]; %>
            <fieldset class="form-group">
                <div class="row">
                    <legend class="col-form-label col-sm-3 pt-0">Status</legend>
                    <div class="col-sm-9">
                        <div class="row">
                            <% statusOptions.forEach(function(status){ %>
                            <div class="col">
                                <div class="form-check-inline">
                                    <input class="form-check-input" type="radio" name="task[status]"
                                        id="status-radio-<%= status.id %>" value="<%= status.name %>"
                                        <% if (task.status===status.name){ %> checked <% } %>>
                                    <label class="form-check-label" for="status-radio-<%= status.id %>">
                                        <%= status.name %>
                                    </label>
                                </div>
                            </div>
                            <% }) %>
                        </div>
                    </div>
                </div>
            </fieldset>

            <!-- task[priority] field -->
            <% var priorityOptions = [ { id: "high",    name: "High" }, 
               { id: "medium",  name: "Medium" },               
               { id: "low",     name: "Low" } ]; %>
            <fieldset class="form-group">
                <div class="row">
                    <legend class="col-form-label col-sm-3 pt-0">Priority</legend>
                    <div class="col-sm-9">
                        <div class="row">
                            <% priorityOptions.forEach(function(priority){ %>
                            <div class="col">
                                <div class="form-check-inline">
                                    <input class="form-check-input" type="radio" name="task[priority]"
                                        id="priority-radio-<%= priority.id %>" value="<%= priority.name %>"
                                        <% if (task.priority===priority.name){ %> checked <% } %>>
                                    <label class="form-check-label" for="status-radio-<%= priority.id %>">
                                        <%= priority.name %>
                                    </label>
                                </div>
                            </div>
                            <% }) %>
                        </div>
                    </div>
                </div>
            </fieldset>

            <!-- task[dueDate] field -->
            <div class="form-group row">
                <label for="task-due-date" class="col-sm-3 col-form-label">Due Date</label>
                <div class="col-sm-9">
                    <input type="date" class="form-control" id="task-due-date" name="task[dueDate]"
                        value="<%= task.dueDate %>">
                </div>
            </div>

            <!-- task[description] field -->
            <div class="form-group row">
                <label for="task-description" class="col-sm-3 col-form-label">Description</label>
                <div class="col-sm-9">
                    <textarea class="form-control" rows="7" class=" form-control" id="task-description"
                        name="task[description]" value="<%= task.description %>"></textarea>
                </div>
            </div>

            <!-- submit button -->
            <div class="form-group">
                <button class="btn btn-primary">Submit!</button>
            </div>


        </form>

    </div>

    <!-- go back link -->
    <div class="row">
        <a href="/lists/<%= list._id %>">Go Back</a>
    </div>

</div>

<%- include ("../partials/footer"); %>